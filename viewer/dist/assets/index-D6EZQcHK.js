var N=Object.defineProperty;var k=h=>{throw TypeError(h)};var F=(h,t,e)=>t in h?N(h,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):h[t]=e;var g=(h,t,e)=>F(h,typeof t!="symbol"?t+"":t,e),V=(h,t,e)=>t.has(h)||k("Cannot "+e);var C=(h,t,e)=>t.has(h)?k("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(h):t.set(h,e);var d=(h,t,e)=>(V(h,t,"access private method"),e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const n of s.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&i(n)}).observe(document,{childList:!0,subtree:!0});function e(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=e(r);fetch(r.href,s)}})();var o,x,M,E,B,P,I,L,A,T,v,y;class _{constructor(t,e){C(this,o);g(this,"MULTIPLIER_REGEX",/^(.*?)\s+x\s+(\d+(?:\.\d+)?)$/);g(this,"DIVIDER_REGEX",/^(.*?)\s+\/\s+(\d+(?:\.\d+)?)$/);g(this,"INTERVAL_REGEX",/^(.*?)\s+@(\d+)(weeks?|months?|years?|days?)(?:\s+x(\d+(?:\.\d+)?))?$/);g(this,"COMPUTABLE_LINE_REGEX",/^[=\-~+x]\s+/);g(this,"RESULT_LINE_REGEX",/^=\s+(\d+(?:\.\d+)?)\s*$/);g(this,"VALUE_REGEX",/^\s+(\d+(?:\.\d+)?)/);g(this,"LABEL_REGEX",/\s+\d+(?:\.\d+)?\s+(.+)/);this.source=t,this.padding=e??3,this.blocks=null,this.raw=null,this.ids=null,this.modifiers=null,this.computed=null,this.index=null,this.blocks=null}process(){this.parse();const{order:t}=this.validate();for(const i of t){const r=this.index.get(i),s=this.blocks.findIndex(n=>n===r);s!==-1&&this.compute(s)}const e=this.blocks.filter(i=>Array.isArray(i)&&i[0][0]==="+");for(const i of e){const r=this.blocks.findIndex(s=>s===i);this.compute(r)}return{blocks:this.blocks,output:this.render()}}parse(){this.raw=new WeakMap,this.ids=new WeakMap,this.modifiers=new WeakMap,this.computed=new Map,this.index=new Map,this.blocks=[];const t=this.source.split(/\r?\n/g);let e=null,i,r,s=t.length,n=s-1;for(let l=0;l<s;l++){if(r=t[l].trim(),i=r[0],"=+".includes(i)&&e===null){const a=d(this,o,E).call(this,r,t[l]);a?e=[a]:this.blocks.push(t[l])}else if(e)if(r.match(/^\s*$/)&&e.length>1)this.blocks.push(e),this.blocks.push(""),e=null;else{const a=d(this,o,E).call(this,r,t[l]);a?e.push(a):(this.blocks.push(...e.map(c=>this.raw.get(c))),this.blocks.push(t[l]),e=null)}else this.blocks.push(t[l]);l===n&&e&&(e.length>1?this.blocks.push(e):this.blocks.push(t[l]),e=null)}}validate(){const t=[];for(const s of this.blocks)if(Array.isArray(s))for(const n of s)if(n[0]==="="){const l=this.ids.get(n);l&&(this.index.has(l)&&t.push(this.index.get(l)),this.index.set(l,s))}else continue;for(const s of t){const n=this.blocks.findIndex(l=>l===s);this.ids.delete(s),this.blocks.splice(n,1,...s.map(l=>this.raw.get(l)))}const e=new Map;for(const s of this.index.values()){let n=null;for(const l of s){if(l[0]==="="){n=new Map;const a=this.ids.get(l);e.set(a,n);continue}if(l[1]===null&&n){const a=this.ids.get(l);n.set(a,1)}}}const{order:i,invalid:r}=d(this,o,I).call(this,e);for(const s of r){const n=this.index.get(s),l=this.blocks.findIndex(a=>a===n);this.ids.delete(n),this.blocks.splice(l,1,...n.map(a=>this.raw.get(a)))}for(const s of this.blocks.filter(n=>Array.isArray(n)))for(const n of s)if(n[0]==="-"||n[0]==="+"){const l=this.ids.get(n);if(n[1]===null&&!this.index.get(l)){const a=this.blocks.findIndex(c=>c===s);this.ids.delete(s),this.blocks.splice(a,1,...s.map(c=>this.raw.get(c)))}}return{order:i,invalid:r}}compute(t){if(!Array.isArray(this.blocks[t]))return;const e=this.blocks[t];let i;if("=".includes(e[0][0])){e[0][2]===""&&(e[0][2]=`
`),i=0;for(const r of e.slice(1)){if(r[0]==="x")continue;const s=d(this,o,x).call(this,r);i+=s,this.modifiers.get(r)&&(r[1]=s)}}else if(e[0][0]==="+"){typeof i>"u"?i=d(this,o,x).call(this,e[0]):i+=d(this,o,x).call(this,e[0]);for(const r of e.slice(1))if(r[0]==="+"?i+=d(this,o,x).call(this,r):r[0]==="-"&&(i-=d(this,o,x).call(this,r)),i<0){this.blocks.splice(t,1,...e.map(s=>this.raw.get(s)));return}}if(e[0][0]==="="){const r=this.modifiers.get(e[0]);r&&(i=r.type==="multiply"?i*r.value:i/r.value),i=d(this,o,v).call(this,i),e[0][1]=i;const s=this.ids.get(e[0]);this.computed.set(s,i)}else i=d(this,o,v).call(this,i),e.at(-1)[0]!=="="?e.push(["=",i,""]):e[e.length-1][1]=i}computeStats(){this.stats={};let t=0,e=0,i;const r=new Map;for(const s of this.blocks)if(!(!Array.isArray(s)||s[0][0]!=="+"))for(const n of s){let[l,a]=n;if(l==="+")t+=a;else if(l==="-"){const c=this.ids.get(n);if(this.computed.has(c)){const u=this.computed.get(c);r.has(c)?r.set(c,r.get(c)+u):r.set(c,u),e+=u}else{const u=this.modifiers.get(n);let p=a;u&&(p=u.type==="multiply"?a*u.value:a/u.value),r.has(c)?r.set(c,r.get(c)+p):r.set(c,p),e+=p}}}this.stats.distribution=[];for(const[s,n]of r.entries())this.stats.distribution.push([s,parseFloat((n/t).toFixed(5))]);this.stats.distribution.sort(d(this,o,T)),i=t-e,this.stats.projections={savings:i,sixmonths:i+i*6,oneyear:i+i*12,threeyears:i+i*36,fiveyears:i+i*60,tenyears:i+i*120}}render(t){let e="";const i=t??this.blocks;for(const s of i.slice(0,-1))if(typeof s=="string")e+=`${s}
`;else for(const n of s){const l=d(this,o,y).call(this,n),a=[n[0],n[1],l].filter(Boolean);e+=`${a.join(" ")}
`}const r=i.at(-1);if(typeof r=="string")e+=`${r}`;else{for(const a of r.slice(0,-1)){const c=d(this,o,y).call(this,a),u=[a[0],a[1],c].filter(Boolean);e+=`${u.join(" ")}
`}const s=r.at(-1),n=d(this,o,y).call(this,s),l=[s[0],s[1],n].filter(Boolean);e+=`${l.join(" ")}`}return e}renderWithPadding(t){const e=this.padding!==null?Math.max(this.padding,d(this,o,A).call(this)):0;let i="";const r=t??this.blocks;for(const n of r.slice(0,-1))if(typeof n=="string")i+=`${n}
`;else for(const l of n){const a=l[1]!==null?l[1].toString().padStart(e):"".padStart(e),c=d(this,o,y).call(this,l);i+=`${l[0]} ${a} ${c??""}
`}const s=r.at(-1);if(typeof s=="string")i+=`${s}`;else{for(const c of s.slice(0,-1)){const u=c[1]!==null?c[1].toString().padStart(e):"".padStart(e),p=d(this,o,y).call(this,c);i+=`${c[0]} ${u} ${p??""}
`}const n=s.at(-1),l=n[1]!==null?n[1].toString().padStart(e):"".padStart(e),a=d(this,o,y).call(this,n);i+=`${n[0]} ${l} ${a??""}
`}return i}}o=new WeakSet,x=function(t){const e=this.modifiers.get(t),i=this.ids.get(t),r=this.computed.get(i);if(e){let s;const n=r||t[1];return e.type==="multiply"?s=n*e.value:e.type==="divide"?s=n/e.value:e.type==="divide_multiply"?s=n/e.divisor*e.multiplier:e.type==="interval"?s=n*e.intervalValue:e.type==="interval_multiply"&&(s=n*e.intervalValue*e.multiplier),s=d(this,o,v).call(this,s),t[1]=s,s}return r&&(t[1]=r),t[1]},M=function(t){let e=t.slice(1).match(this.VALUE_REGEX)??null;return e&&(e=parseFloat(e[1]),isNaN(e)&&(e=null)),e},E=function(t,e){if(!t.match(this.COMPUTABLE_LINE_REGEX))return;if(t.match(this.RESULT_LINE_REGEX)){const a=["=",d(this,o,M).call(this,t)];return this.raw.set(a,e),a}const i=d(this,o,M).call(this,t);let r=t.slice(1).match(this.LABEL_REGEX)??null;if(r===null&&i!==null)return;r=r?r[1]:t.slice(1).trim();const s=[t[0],i,r],n=d(this,o,B).call(this,s[2]);return n?(this.ids.set(s,n[0]),this.modifiers.set(s,n[1])):this.ids.set(s,r),this.raw.set(s,e),s},B=function(t){const e=t.trim().match(/^(.*?)\s+\/\s+(\d+(?:\.\d+)?)\s+x\s+(\d+(?:\.\d+)?)$/);if(e){const[,n,l,a]=e;return[n,{type:"divide_multiply",divisor:parseFloat(l),multiplier:parseFloat(a)}]}const i=t.trim().match(this.MULTIPLIER_REGEX);if(i)return[i[1],{type:"multiply",value:parseFloat(i[2])}];const r=t.trim().match(this.DIVIDER_REGEX);if(r)return[r[1],{type:"divide",value:parseFloat(r[2])}];const s=t.trim().match(this.INTERVAL_REGEX);if(s){const[,n,l,a,c]=s,u=d(this,o,P).call(this,parseFloat(l),a);return c?[n,{type:"interval_multiply",intervalValue:u,multiplier:parseFloat(c)}]:[n,{type:"interval",intervalValue:u}]}},P=function(t,e){return({day:365.25/t,days:365.25/t,week:52.18/t,weeks:52.18/t,month:12/t,months:12/t,year:1/t,years:1/t}[e]||1)/12},I=function(t){const e=[],i=new Set,r=new Map;for(const s of t.keys())r.has(s)||d(this,o,L).call(this,s,t,e,i,r);return{order:e,invalid:[...i]}},L=function(t,e,i,r,s){const n=s.get(t)??0;if(n===1)return!0;if(n===2)return r.has(t);s.set(t,1);let l=!1;const a=e.get(t)||new Map;for(const c of a.keys())d(this,o,L).call(this,c,e,i,r,s)&&(l=!0);return s.set(t,2),l?r.add(t):i.push(t),l},A=function(){let t=3;for(const e of this.blocks){if(!Array.isArray(e))continue;let i;for(const r of e)r[1]!==null&&(i=r[1].toString().length,i>t+1&&(t=i+1))}return t+1},T=function(t,e){return e[1]-t[1]},v=function(t){return Math.round(t)},y=function(t){return this.modifiers.get(t)?this.ids.get(t):t[2]};let $=null,H=!1;window.__TAURI__&&($=window.__TAURI__,H=!0);class R{constructor(){this.elements={fileInput:document.getElementById("fileInput"),budgetOutput:document.getElementById("budgetOutput"),statsContainer:document.getElementById("statsContainer"),statsOutput:document.getElementById("statsOutput")},this.currentBudget=null,this.statsVisible=!0,this.defaultBudgetPath="./budget.pb",this.iconMap=new Map([["income","DollarSign"],["salary","DollarSign"],["wage","DollarSign"],["money","CircleDollarSign"],["royalties","Music"],["spotify","Music"],["patreon","Heart"],["kofi","Coffee"],["bandcamp","Music"],["people","Users"],["business","Briefcase"],["office","Briefcase"],["work","Briefcase"],["pension","Briefcase"],["capital","Briefcase"],["rent","Home"],["bills","Home"],["household","Home"],["electricity","Zap"],["electric","Zap"],["power","Zap"],["water","Droplets"],["internet","Wifi"],["wifi","Wifi"],["broadband","Wifi"],["insurance","Shield"],["council","Home"],["ground","Home"],["building","Home"],["cloud","Wifi"],["netflix","Tv"],["streaming","Tv"],["beer","beer"],["Pub","beer"],["food","Utensils"],["groceries","ShoppingCart"],["sundries","ShoppingCart"],["meals","Package"],["milk","Package"],["shop","ShoppingCart"],["personal","Heart"],["haircuts","Scissors"],["haircut","Scissors"],["barber","Scissors"],["toothpaste","Package"],["cat","PawPrint"],["pet","PawPrint"],["dog","PawPrint"],["litter","PawPrint"],["car","Car"],["transport","Car"],["fuel","Car"],["petrol","Car"],["diesel","Car"],["phone","Phone"],["mobile","Phone"],["smartphone","Phone"],["cell","Phone"],["bin","Trash2"],["waste","Trash2"],["garden","Trash2"],["rubbish","Trash2"],["washing","Package"],["toilet","Package"],["laundy","Package"],["laundry","Package"],["dishwasher","Package"],["cleaning","Package"],["detergent","Package"],["tablets","Package"],["roll","Package"],["bio","Package"],["beer","Beer"],["wine","Wine"],["alcohol","Beer"],["drinks","Coffee"]]),this.init()}init(){this.elements.fileInput.addEventListener("change",this.handleFileLoad.bind(this)),this.loadDefaultBudget(),this.elements.statsContainer.classList.remove("hidden"),this.elements.statsContainer.classList.add("xl:block")}async loadDefaultBudget(){try{let t;if(H){const{readTextFile:e}=$.fs;t=await e(this.defaultBudgetPath)}else{const e=await fetch("/budget.pb");if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);t=await e.text()}this.processBudget(t)}catch(t){console.error("Could not load default budget file:",t),this.showError(`Could not load budget file: ${this.defaultBudgetPath}. Please use the file picker to load a budget.`)}}async loadLocalBudget(){try{const t=await fetch("/budget.pb");if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);const e=await t.text();this.processBudget(e)}catch(t){console.error("Could not load local budget file:",t),this.showError("Could not load budget.pb file. Please use the file picker to load a budget.")}}async handleFileLoad(t){const e=t.target.files[0];if(e)try{const i=await e.text();this.processBudget(i)}catch(i){this.showError("Error reading file: "+i.message)}}processBudget(t){try{this.currentBudget=new _(t);const e=this.currentBudget.process();this.renderBudgetTable(this.currentBudget.blocks),this.currentBudget.computeStats(),this.renderStats()}catch(e){this.showError("Error processing budget: "+e.message)}}renderBudgetTable(t){const e=this.elements.budgetOutput;e.innerHTML="";const i=document.createElement("table");i.className="w-full max-w-xl mx-auto",t.forEach(r=>{if(typeof r=="string"){if(r.trim()){const s=document.createElement("tr");s.className="budget-row",s.innerHTML=`
            <td class="px-6 py-4 text-left text-gray-900 font-medium">${this.escapeHtml(r)}</td>
            <td class="px-6 py-4 text-right"></td>
          `,i.appendChild(s)}}else if(Array.isArray(r)){const s=document.createElement("tbody");s.className="budget-group",r.forEach((n,l)=>{const[a,c,u]=n,p=document.createElement("tr");if(l===0&&(a==="+"||a==="-")){const f=document.createElement("tr");f.className="budget-group-header",f.innerHTML=`
                          <td colspan="2" class="px-6 py-5 font-bold">Cashflow</td>
                        `,s.appendChild(f)}if(l===0&&a==="="){p.className="budget-group-header";const f=this.getCleanLabel(n),w=this.getIconForLabel(f),m=f&&f.toLowerCase().includes("income"),b=m?"text-emerald-700":"text-gray-900",S=m?"bg-emerald-100 text-emerald-800":"bg-blue-100 text-blue-800";p.innerHTML=`
              <td class="px-6 py-5 text-left">
                <div class="flex items-center">
                  <div class="w-6 h-6 mr-3 ${m?"text-emerald-500":"text-blue-500"}">${this.createIconElement(w,24)}</div>
                  <span class="text-lg font-bold ${b}">${f||""}</span>
                </div>
              </td>
              <td class="px-6 py-5 text-right">
                <span class="inline-flex items-center px-4 py-2 rounded-xl ${S} text-lg font-mono font-bold">
                  ${this.formatNumber(c)}
                </span>
              </td>
            `}else if(p.className="budget-row",a==="+"?p.classList.add("flow-positive"):a==="-"&&p.classList.add("flow-negative"),a==="="&&(!u||u.trim()===""))p.classList.add("flow-result"),p.innerHTML=`
                <td class="px-6 py-4 text-left">
                  <div class="flex items-center">
                    <div class="w-2 h-2 bg-blue-500 rounded-full mr-3"></div>
                    <span class="text-base font-semibold text-blue-700">Total</span>
                  </div>
                </td>
                <td class="px-6 py-4 text-right">
                  <span class="inline-flex items-center px-3 py-1 rounded-lg bg-blue-100 text-blue-800 font-mono font-bold text-lg">
                    ${this.formatNumber(c)}
                  </span>
                </td>
              `;else{const f=this.getCleanLabel(n),w=this.getIconForLabel(f);let m=f||"";a==="+"?m=m||"Income":a==="-"&&(m=m||"Expense");let b="text-emerald-600 font-semibold font-mono";a==="-"?b="text-blue-600 font-semibold font-mono":a==="+"&&(b="text-emerald-600 font-bold font-mono"),p.innerHTML=`
                <td class="px-6 py-3 text-left text-gray-700 font-medium">
                  <div class="flex items-center">
                    <div class="w-4 h-4 mr-3 text-gray-500">${this.createIconElement(w,16)}</div>
                    <span>${m}</span>
                  </div>
                </td>
                <td class="px-6 py-3 text-right ${b}">${this.formatNumber(c)}</td>
              `}s.appendChild(p)}),i.appendChild(s)}}),e.appendChild(i)}getIconForLabel(t){if(!t)return"Circle";const e=t.toLowerCase();for(const[i,r]of this.iconMap)if(e.includes(i))return r;return e.includes("tax")||e.includes("council")||e.includes("rates")?"Home":e.includes("subscription")||e.includes("membership")||e.includes("premium")?"CreditCard":e.includes("health")||e.includes("medical")||e.includes("doctor")||e.includes("pharmacy")?"Heart":e.includes("gym")||e.includes("fitness")||e.includes("sport")?"Activity":e.includes("entertainment")||e.includes("cinema")||e.includes("movie")||e.includes("theatre")?"Film":e.includes("book")||e.includes("magazine")||e.includes("newspaper")||e.includes("education")?"BookOpen":e.includes("gift")||e.includes("present")||e.includes("birthday")?"Gift":e.includes("repair")||e.includes("maintenance")||e.includes("service")?"Wrench":"Circle"}createIconElement(t,e=24){const i=document.createElementNS("http://www.w3.org/2000/svg","svg");i.setAttribute("width",e.toString()),i.setAttribute("height",e.toString()),i.setAttribute("viewBox","0 0 24 24"),i.setAttribute("fill","none"),i.setAttribute("stroke","currentColor"),i.setAttribute("stroke-width","2"),i.setAttribute("stroke-linecap","round"),i.setAttribute("stroke-linejoin","round");const r=this.getIconPath(t);return r&&(i.innerHTML=r),i.outerHTML}getIconPath(t){const e={DollarSign:'<line x1="12" y1="1" x2="12" y2="23"></line><path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path>',Briefcase:'<rect x="2" y="7" width="20" height="14" rx="2" ry="2"></rect><path d="M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"></path>',Home:'<path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path><polyline points="9,22 9,12 15,12 15,22"></polyline>',Users:'<path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"></path><circle cx="9" cy="7" r="4"></circle><path d="M22 21v-2a4 4 0 0 0-3-3.87"></path><path d="M16 3.13a4 4 0 0 1 0 7.75"></path>',ShoppingCart:'<circle cx="9" cy="21" r="1"></circle><circle cx="20" cy="21" r="1"></circle><path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path>',Utensils:'<path d="M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2"></path><path d="M7 2v20"></path><path d="M21 15V2v0a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3z"></path>',Car:'<path d="M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9L18 10V6l-2-4H8L6 6v4l-2.5 1.1c-.8.2-1.5 1-1.5 1.9v3c0 .6.4 1 1 1h2"></path><circle cx="7" cy="17" r="2"></circle><path d="M9 17h6"></path><circle cx="17" cy="17" r="2"></circle>',Phone:'<path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"></path>',Wifi:'<path d="M1.42 9a16 16 0 0 1 21.16 0"></path><path d="M5 12.55a11 11 0 0 1 14.08 0"></path><path d="M8.53 16.11a6 6 0 0 1 6.95 0"></path><line x1="12" y1="20" x2="12.01" y2="20"></line>',Zap:'<polygon points="13,2 3,14 12,14 11,22 21,10 12,10 13,2"></polygon>',Droplets:'<path d="M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z"></path><path d="M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2.04 4.6 4.14 6.09A5.11 5.11 0 0 1 20 14c0 .75-.22 1.46-.61 2.06"></path>',Shield:'<path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"></path>',Heart:'<path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path>',PawPrint:'<circle cx="11" cy="4" r="2"></circle><circle cx="18" cy="8" r="2"></circle><circle cx="20" cy="16" r="2"></circle><path d="M9 10a5 5 0 0 1 5 5v3.5a3.5 3.5 0 0 1-6.84 1.045Q6.52 17.48 4.46 16.84A3.5 3.5 0 0 1 5.5 10Z"></path>',Scissors:'<circle cx="6" cy="6" r="3"></circle><circle cx="6" cy="18" r="3"></circle><line x1="20" y1="4" x2="8.12" y2="15.88"></line><line x1="14.47" y1="14.48" x2="20" y2="20"></line><line x1="8.12" y1="8.12" x2="12" y2="12"></line>',Coffee:'<path d="M18 8h1a4 4 0 0 1 0 8h-1"></path><path d="M2 8h16v9a4 4 0 0 1-4 4H6a4 4 0 0 1-4-4V8z"></path><line x1="6" y1="1" x2="6" y2="4"></line><line x1="10" y1="1" x2="10" y2="4"></line><line x1="14" y1="1" x2="14" y2="4"></line>',Calculator:'<rect x="4" y="2" width="16" height="20" rx="2"></rect><line x1="8" y1="6" x2="16" y2="6"></line><line x1="8" y1="10" x2="16" y2="10"></line><line x1="8" y1="14" x2="16" y2="14"></line><line x1="8" y1="18" x2="16" y2="18"></line>',Trash2:'<polyline points="3,6 5,6 21,6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path><line x1="10" y1="11" x2="10" y2="17"></line><line x1="14" y1="11" x2="14" y2="17"></line>',Package:'<line x1="16.5" y1="9.4" x2="7.5" y2="4.21"></line><path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"></path><polyline points="3.27,6.96 12,12.01 20.73,6.96"></polyline><line x1="12" y1="22.08" x2="12" y2="12"></line>',CircleDollarSign:'<circle cx="12" cy="12" r="10"></circle><line x1="12" y1="6" x2="12" y2="18"></line><path d="M16 10a4 4 0 0 0-8 0c0 1 0 2 1 3h6c1-1 1-2 1-3z"></path><path d="M8 14a4 4 0 0 0 8 0"></path>',Tv:'<rect x="2" y="3" width="20" height="14" rx="2" ry="2"></rect><line x1="8" y1="21" x2="16" y2="21"></line><line x1="12" y1="17" x2="12" y2="21"></line>',Circle:'<circle cx="12" cy="12" r="10"></circle>',CreditCard:'<rect x="1" y="4" width="22" height="16" rx="2" ry="2"></rect><line x1="1" y1="10" x2="23" y2="10"></line>',Activity:'<polyline points="22,12 18,12 15,21 9,3 6,12 2,12"></polyline>',Film:'<rect x="2" y="3" width="20" height="14" rx="2" ry="2"></rect><line x1="8" y1="21" x2="16" y2="21"></line><line x1="12" y1="17" x2="12" y2="21"></line><circle cx="12" cy="10" r="3"></circle>',BookOpen:'<path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"></path><path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"></path>',Gift:'<polyline points="20,12 20,22 4,22 4,12"></polyline><rect x="2" y="7" width="20" height="5"></rect><line x1="12" y1="22" x2="12" y2="7"></line><path d="M12 7H7.5a2.5 2.5 0 0 1 0-5C11 2 12 7 12 7z"></path><path d="M12 7h4.5a2.5 2.5 0 0 0 0-5C13 2 12 7 12 7z"></path>',Wrench:'<path d="M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"></path>',Music:'<path d="M9 18V5l12-2v13"></path><circle cx="6" cy="18" r="3"></circle><circle cx="18" cy="16" r="3"></circle>',Beer:'<path d="M17 11h1a3 3 0 0 1 0 6h-1M5 9v10a4 4 0 0 0 4 4h2a4 4 0 0 0 4-4V9M5 9l1-6h12l1 6M5 9h12"></path>',Wine:'<path d="M12 8V1l4 4H8l4-4v7M8 8l2 14h4l2-14M5 8h14"></path>'};return e[t]||e.Circle}getCleanLabel(t){var i,r;return this.currentBudget&&((i=this.currentBudget.modifiers)==null?void 0:i.get(t))?((r=this.currentBudget.ids)==null?void 0:r.get(t))||t[2]||"":t[2]||""}formatNumber(t){return t==null?"":Number.isInteger(t)?new Intl.NumberFormat("en-GB",{minimumFractionDigits:0,maximumFractionDigits:0}).format(t):new Intl.NumberFormat("en-GB",{minimumFractionDigits:0,maximumFractionDigits:2}).format(t)}escapeHtml(t){const e=document.createElement("div");return e.textContent=t,e.innerHTML}renderStats(){if(!this.currentBudget||!this.currentBudget.stats)return;const t=this.currentBudget.stats,e=this.elements.statsOutput;e.innerHTML="";const i=document.createElement("div");if(i.className="mb-8",i.innerHTML='<h3 class="text-lg font-bold text-gray-900 mb-4">Financial Projections</h3>',[["Monthly Savings",t.projections.savings],["6 Months",t.projections.sixmonths],["1 Year",t.projections.oneyear],["3 Years",t.projections.threeyears],["5 Years",t.projections.fiveyears],["10 Years",t.projections.tenyears]].forEach(([s,n])=>{const l=document.createElement("div");l.className="projection-item",l.innerHTML=`
        <span class="text-sm font-medium text-gray-600">${s}</span>
        <span class="inline-flex items-center px-3 py-1 rounded-lg bg-emerald-100 text-emerald-800 text-sm font-mono font-bold">
          ${this.formatCurrency(n)}
        </span>
      `,i.appendChild(l)}),e.appendChild(i),t.distribution&&t.distribution.length>0){const s=document.createElement("div");s.className="space-y-4",s.innerHTML='<h3 class="text-lg font-bold text-gray-900 mb-4">Expense Breakdown</h3>',t.distribution.slice(0,8).forEach(([n,l])=>{const a=document.createElement("div");a.className="space-y-2",a.innerHTML=`
          <div class="flex justify-between items-center">
            <span class="text-sm font-medium text-gray-700">${n}</span>
            <span class="text-sm font-mono font-semibold text-blue-600">${(l*100).toFixed(1)}%</span>
          </div>
          <div class="distribution-bar w-full">
            <div class="distribution-fill" style="width: ${l*100}%"></div>
          </div>
        `,s.appendChild(a)}),e.appendChild(s)}}formatCurrency(t){return new Intl.NumberFormat("en-GB",{style:"currency",currency:"GBP",minimumFractionDigits:0,maximumFractionDigits:2}).format(t)}showError(t){const e=this.elements.budgetOutput;e.innerHTML=`
      <div class="p-6 text-center">
        <div class="bg-red-50 border border-red-200 rounded-xl p-6">
          <div class="flex items-center justify-center mb-4">
            <div class="flex-shrink-0">
              <svg class="h-8 w-8 text-red-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z" />
              </svg>
            </div>
            <div class="ml-3">
              <h3 class="text-lg font-medium text-red-800">Error Loading Budget</h3>
            </div>
          </div>
          <p class="text-red-700">${t}</p>
        </div>
      </div>
    `}}new R;
