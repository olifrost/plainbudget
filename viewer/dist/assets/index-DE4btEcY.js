var F=Object.defineProperty;var P=h=>{throw TypeError(h)};var N=(h,t,e)=>t in h?F(h,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):h[t]=e;var g=(h,t,e)=>N(h,typeof t!="symbol"?t+"":t,e),V=(h,t,e)=>t.has(h)||P("Cannot "+e);var B=(h,t,e)=>t.has(h)?P("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(h):t.set(h,e);var d=(h,t,e)=>(V(h,t,"access private method"),e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const r of i.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&s(r)}).observe(document,{childList:!0,subtree:!0});function e(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(n){if(n.ep)return;n.ep=!0;const i=e(n);fetch(n.href,i)}})();var o,x,M,L,C,I,S,E,T,H,v,y;class _{constructor(t,e){B(this,o);g(this,"MULTIPLIER_REGEX",/^(.*?)\s+x\s+(\d+(?:\.\d+)?)$/);g(this,"DIVIDER_REGEX",/^(.*?)\s+\/\s+(\d+(?:\.\d+)?)$/);g(this,"INTERVAL_REGEX",/^(.*?)\s+@(\d+)(weeks?|months?|years?|days?)(?:\s+x(\d+(?:\.\d+)?))?$/);g(this,"COMPUTABLE_LINE_REGEX",/^[=\-~+x]\s+/);g(this,"RESULT_LINE_REGEX",/^=\s+(\d+(?:\.\d+)?)\s*$/);g(this,"VALUE_REGEX",/^\s+(\d+(?:\.\d+)?)/);g(this,"LABEL_REGEX",/\s+\d+(?:\.\d+)?\s+(.+)/);this.source=t,this.padding=e??3,this.blocks=null,this.raw=null,this.ids=null,this.modifiers=null,this.computed=null,this.index=null,this.blocks=null}process(){this.parse();const{order:t}=this.validate();for(const s of t){const n=this.index.get(s),i=this.blocks.findIndex(r=>r===n);i!==-1&&this.compute(i)}const e=this.blocks.filter(s=>Array.isArray(s)&&s[0][0]==="+");for(const s of e){const n=this.blocks.findIndex(i=>i===s);this.compute(n)}return{blocks:this.blocks,output:this.render()}}parse(){this.raw=new WeakMap,this.ids=new WeakMap,this.modifiers=new WeakMap,this.computed=new Map,this.index=new Map,this.blocks=[];const t=this.source.split(/\r?\n/g);let e=null,s,n,i=t.length,r=i-1;for(let a=0;a<i;a++){if(n=t[a].trim(),s=n[0],"=+".includes(s)&&e===null){const l=d(this,o,L).call(this,n,t[a]);l?e=[l]:this.blocks.push(t[a])}else if(e)if(n.match(/^\s*$/)&&e.length>1)this.blocks.push(e),this.blocks.push(""),e=null;else{const l=d(this,o,L).call(this,n,t[a]);l?e.push(l):(this.blocks.push(...e.map(c=>this.raw.get(c))),this.blocks.push(t[a]),e=null)}else this.blocks.push(t[a]);a===r&&e&&(e.length>1?this.blocks.push(e):this.blocks.push(t[a]),e=null)}}validate(){const t=[];for(const i of this.blocks)if(Array.isArray(i))for(const r of i)if(r[0]==="="){const a=this.ids.get(r);a&&(this.index.has(a)&&t.push(this.index.get(a)),this.index.set(a,i))}else continue;for(const i of t){const r=this.blocks.findIndex(a=>a===i);this.ids.delete(i),this.blocks.splice(r,1,...i.map(a=>this.raw.get(a)))}const e=new Map;for(const i of this.index.values()){let r=null;for(const a of i){if(a[0]==="="){r=new Map;const l=this.ids.get(a);e.set(l,r);continue}if(a[1]===null&&r){const l=this.ids.get(a);r.set(l,1)}}}const{order:s,invalid:n}=d(this,o,S).call(this,e);for(const i of n){const r=this.index.get(i),a=this.blocks.findIndex(l=>l===r);this.ids.delete(r),this.blocks.splice(a,1,...r.map(l=>this.raw.get(l)))}for(const i of this.blocks.filter(r=>Array.isArray(r)))for(const r of i)if(r[0]==="-"||r[0]==="+"){const a=this.ids.get(r);if(r[1]===null&&!this.index.get(a)){const l=this.blocks.findIndex(c=>c===i);this.ids.delete(i),this.blocks.splice(l,1,...i.map(c=>this.raw.get(c)))}}return{order:s,invalid:n}}compute(t){if(!Array.isArray(this.blocks[t]))return;const e=this.blocks[t];let s;if("=".includes(e[0][0])){e[0][2]===""&&(e[0][2]=`
`),s=0;for(const n of e.slice(1)){if(n[0]==="x")continue;const i=d(this,o,x).call(this,n);s+=i,this.modifiers.get(n)&&(n[1]=i)}}else if(e[0][0]==="+"){typeof s>"u"?s=d(this,o,x).call(this,e[0]):s+=d(this,o,x).call(this,e[0]);for(const n of e.slice(1))if(n[0]==="+"?s+=d(this,o,x).call(this,n):n[0]==="-"&&(s-=d(this,o,x).call(this,n)),s<0){this.blocks.splice(t,1,...e.map(i=>this.raw.get(i)));return}}if(e[0][0]==="="){const n=this.modifiers.get(e[0]);n&&(s=n.type==="multiply"?s*n.value:s/n.value),s=d(this,o,v).call(this,s),e[0][1]=s;const i=this.ids.get(e[0]);this.computed.set(i,s)}else s=d(this,o,v).call(this,s),e.at(-1)[0]!=="="?e.push(["=",s,""]):e[e.length-1][1]=s}computeStats(){this.stats={};let t=0,e=0,s;const n=new Map;for(const i of this.blocks)if(!(!Array.isArray(i)||i[0][0]!=="+"))for(const r of i){let[a,l]=r;if(a==="+")t+=l;else if(a==="-"){const c=this.ids.get(r);if(this.computed.has(c)){const u=this.computed.get(c);n.has(c)?n.set(c,n.get(c)+u):n.set(c,u),e+=u}else{const u=this.modifiers.get(r);let p=l;u&&(p=u.type==="multiply"?l*u.value:l/u.value),n.has(c)?n.set(c,n.get(c)+p):n.set(c,p),e+=p}}}this.stats.distribution=[];for(const[i,r]of n.entries())this.stats.distribution.push([i,parseFloat((r/t).toFixed(5))]);this.stats.distribution.sort(d(this,o,H)),s=t-e,this.stats.projections={savings:s,sixmonths:s+s*6,oneyear:s+s*12,threeyears:s+s*36,fiveyears:s+s*60,tenyears:s+s*120}}render(t){let e="";const s=t??this.blocks;for(const i of s.slice(0,-1))if(typeof i=="string")e+=`${i}
`;else for(const r of i){const a=d(this,o,y).call(this,r),l=[r[0],r[1],a].filter(Boolean);e+=`${l.join(" ")}
`}const n=s.at(-1);if(typeof n=="string")e+=`${n}`;else{for(const l of n.slice(0,-1)){const c=d(this,o,y).call(this,l),u=[l[0],l[1],c].filter(Boolean);e+=`${u.join(" ")}
`}const i=n.at(-1),r=d(this,o,y).call(this,i),a=[i[0],i[1],r].filter(Boolean);e+=`${a.join(" ")}`}return e}renderWithPadding(t){const e=this.padding!==null?Math.max(this.padding,d(this,o,T).call(this)):0;let s="";const n=t??this.blocks;for(const r of n.slice(0,-1))if(typeof r=="string")s+=`${r}
`;else for(const a of r){const l=a[1]!==null?a[1].toString().padStart(e):"".padStart(e),c=d(this,o,y).call(this,a);s+=`${a[0]} ${l} ${c??""}
`}const i=n.at(-1);if(typeof i=="string")s+=`${i}`;else{for(const c of i.slice(0,-1)){const u=c[1]!==null?c[1].toString().padStart(e):"".padStart(e),p=d(this,o,y).call(this,c);s+=`${c[0]} ${u} ${p??""}
`}const r=i.at(-1),a=r[1]!==null?r[1].toString().padStart(e):"".padStart(e),l=d(this,o,y).call(this,r);s+=`${r[0]} ${a} ${l??""}
`}return s}}o=new WeakSet,x=function(t){const e=this.modifiers.get(t),s=this.ids.get(t),n=this.computed.get(s);if(e){let i;const r=n||t[1];return e.type==="multiply"?i=r*e.value:e.type==="divide"?i=r/e.value:e.type==="divide_multiply"?i=r/e.divisor*e.multiplier:e.type==="interval"?i=r*e.intervalValue:e.type==="interval_multiply"&&(i=r*e.intervalValue*e.multiplier),i=d(this,o,v).call(this,i),t[1]=i,i}return n&&(t[1]=n),t[1]},M=function(t){let e=t.slice(1).match(this.VALUE_REGEX)??null;return e&&(e=parseFloat(e[1]),isNaN(e)&&(e=null)),e},L=function(t,e){if(!t.match(this.COMPUTABLE_LINE_REGEX))return;if(t.match(this.RESULT_LINE_REGEX)){const l=["=",d(this,o,M).call(this,t)];return this.raw.set(l,e),l}const s=d(this,o,M).call(this,t);let n=t.slice(1).match(this.LABEL_REGEX)??null;if(n===null&&s!==null)return;n=n?n[1]:t.slice(1).trim();const i=[t[0],s,n],r=d(this,o,C).call(this,i[2]);return r?(this.ids.set(i,r[0]),this.modifiers.set(i,r[1])):this.ids.set(i,n),this.raw.set(i,e),i},C=function(t){const e=t.trim().match(/^(.*?)\s+\/\s+(\d+(?:\.\d+)?)\s+x\s+(\d+(?:\.\d+)?)$/);if(e){const[,r,a,l]=e;return[r,{type:"divide_multiply",divisor:parseFloat(a),multiplier:parseFloat(l)}]}const s=t.trim().match(this.MULTIPLIER_REGEX);if(s)return[s[1],{type:"multiply",value:parseFloat(s[2])}];const n=t.trim().match(this.DIVIDER_REGEX);if(n)return[n[1],{type:"divide",value:parseFloat(n[2])}];const i=t.trim().match(this.INTERVAL_REGEX);if(i){const[,r,a,l,c]=i,u=d(this,o,I).call(this,parseFloat(a),l);return c?[r,{type:"interval_multiply",intervalValue:u,multiplier:parseFloat(c)}]:[r,{type:"interval",intervalValue:u}]}},I=function(t,e){return({day:365.25/t,days:365.25/t,week:52.18/t,weeks:52.18/t,month:12/t,months:12/t,year:1/t,years:1/t}[e]||1)/12},S=function(t){const e=[],s=new Set,n=new Map;for(const i of t.keys())n.has(i)||d(this,o,E).call(this,i,t,e,s,n);return{order:e,invalid:[...s]}},E=function(t,e,s,n,i){const r=i.get(t)??0;if(r===1)return!0;if(r===2)return n.has(t);i.set(t,1);let a=!1;const l=e.get(t)||new Map;for(const c of l.keys())d(this,o,E).call(this,c,e,s,n,i)&&(a=!0);return i.set(t,2),a?n.add(t):s.push(t),a},T=function(){let t=3;for(const e of this.blocks){if(!Array.isArray(e))continue;let s;for(const n of e)n[1]!==null&&(s=n[1].toString().length,s>t+1&&(t=s+1))}return t+1},H=function(t,e){return e[1]-t[1]},v=function(t){return Math.round(t)},y=function(t){return this.modifiers.get(t)?this.ids.get(t):t[2]};let $=null,k=!1;window.__TAURI__&&($=window.__TAURI__,k=!0);class D{constructor(){this.elements={fileInput:document.getElementById("fileInput"),configButton:document.getElementById("configButton"),configModal:document.getElementById("configModal"),closeModal:document.getElementById("closeModal"),defaultPath:document.getElementById("defaultPath"),loadFromPath:document.getElementById("loadFromPath"),pathStatus:document.getElementById("pathStatus"),budgetOutput:document.getElementById("budgetOutput"),statsContainer:document.getElementById("statsContainer"),statsOutput:document.getElementById("statsOutput")},this.currentBudget=null,this.statsVisible=!0,this.defaultBudgetPath="./sample-budget.pb",this.loadSavedConfiguration(),this.iconMap=new Map([["income","DollarSign"],["salary","DollarSign"],["wage","DollarSign"],["money","CircleDollarSign"],["royalties","Music"],["spotify","Music"],["patreon","Heart"],["kofi","Coffee"],["bandcamp","Music"],["people","Users"],["business","Briefcase"],["office","Briefcase"],["work","Briefcase"],["pension","Briefcase"],["capital","Briefcase"],["rent","Home"],["bills","Home"],["household","Home"],["electricity","Zap"],["electric","Zap"],["power","Zap"],["water","Droplets"],["internet","Wifi"],["wifi","Wifi"],["broadband","Wifi"],["insurance","Shield"],["council","Home"],["ground","Home"],["building","Home"],["cloud","Wifi"],["netflix","Tv"],["streaming","Tv"],["beer","beer"],["Pub","beer"],["food","Utensils"],["groceries","ShoppingCart"],["sundries","ShoppingCart"],["meals","Package"],["milk","Package"],["shop","ShoppingCart"],["personal","Heart"],["haircuts","Scissors"],["haircut","Scissors"],["barber","Scissors"],["toothpaste","Package"],["cat","PawPrint"],["pet","PawPrint"],["dog","PawPrint"],["litter","PawPrint"],["car","Car"],["transport","Car"],["fuel","Car"],["petrol","Car"],["diesel","Car"],["phone","Phone"],["mobile","Phone"],["smartphone","Phone"],["cell","Phone"],["bin","Trash2"],["waste","Trash2"],["garden","Trash2"],["rubbish","Trash2"],["washing","Package"],["toilet","Package"],["laundy","Package"],["laundry","Package"],["dishwasher","Package"],["cleaning","Package"],["detergent","Package"],["tablets","Package"],["roll","Package"],["bio","Package"],["beer","Beer"],["wine","Wine"],["alcohol","Beer"],["drinks","Coffee"]]),this.init()}loadSavedConfiguration(){const t=localStorage.getItem("plainbudget-default-path");t?(this.defaultBudgetPath=t,this.elements.defaultPath.value=t):this.elements.defaultPath.value=this.defaultBudgetPath}openModal(){this.elements.configModal.classList.remove("hidden"),setTimeout(()=>{this.elements.defaultPath.focus()},100)}closeModal(){this.elements.configModal.classList.add("hidden")}saveConfiguration(){const t=this.elements.defaultPath.value.trim();t&&(this.defaultBudgetPath=t,localStorage.setItem("plainbudget-default-path",t))}init(){this.elements.fileInput.addEventListener("change",this.handleFileLoad.bind(this)),this.elements.loadFromPath.addEventListener("click",this.loadFromCustomPath.bind(this)),this.elements.configButton.addEventListener("click",this.openModal.bind(this)),this.elements.closeModal.addEventListener("click",this.closeModal.bind(this)),this.elements.configModal.addEventListener("click",t=>{t.target===this.elements.configModal&&this.closeModal()}),this.elements.defaultPath.addEventListener("change",this.saveConfiguration.bind(this)),this.elements.defaultPath.addEventListener("blur",this.saveConfiguration.bind(this)),document.addEventListener("keydown",t=>{t.key==="Escape"&&!this.elements.configModal.classList.contains("hidden")&&this.closeModal()}),this.loadDefaultBudget(),this.elements.statsContainer.classList.remove("hidden"),this.elements.statsContainer.classList.add("xl:block")}showPathStatus(t,e=""){const s=this.elements.pathStatus;t?(s.innerHTML=`
                <span class="inline-flex items-center px-3 py-1 rounded-full text-green-800 bg-green-100">
                    ✓ Loaded successfully
                </span>
            `,s.classList.remove("hidden"),setTimeout(()=>{s.classList.add("hidden")},3e3)):(s.innerHTML=`
                <span class="inline-flex items-center px-3 py-1 rounded-full text-red-800 bg-red-100">
                    ✗ Failed to load
                </span>
            `,s.classList.remove("hidden"),setTimeout(()=>{s.classList.add("hidden")},5e3))}async loadFromCustomPath(){this.saveConfiguration(),await this.loadDefaultBudget(),setTimeout(()=>{this.closeModal()},1500)}async loadDefaultBudget(){try{let t;if(k){const{readTextFile:e}=$.fs;t=await e(this.defaultBudgetPath)}else{let e=this.defaultBudgetPath;!e.startsWith("/")&&!e.startsWith("http")&&(e="/"+e.replace("./",""));const s=await fetch(e);if(!s.ok)throw new Error(`HTTP error! status: ${s.status}`);t=await s.text()}this.processBudget(t),this.showPathStatus(!0)}catch(t){console.error("Could not load default budget file:",t),this.showPathStatus(!1),this.showError(`Could not load budget file: "${this.defaultBudgetPath}". ${k?"Please check the file path exists.":"In web mode, only files served by the web server can be loaded."} You can use the file picker to load any budget file.`)}}async loadLocalBudget(){try{const t=await fetch("/budget.pb");if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);const e=await t.text();this.processBudget(e)}catch(t){console.error("Could not load local budget file:",t),this.showError("Could not load budget.pb file. Please use the file picker to load a budget.")}}async handleFileLoad(t){const e=t.target.files[0];if(e)try{const s=await e.text();this.processBudget(s)}catch(s){this.showError("Error reading file: "+s.message)}}processBudget(t){try{this.currentBudget=new _(t);const e=this.currentBudget.process();this.renderBudgetTable(this.currentBudget.blocks),this.currentBudget.computeStats(),this.renderStats()}catch(e){this.showError("Error processing budget: "+e.message)}}renderBudgetTable(t){const e=this.elements.budgetOutput;e.innerHTML="";const s=document.createElement("table");s.className="w-full max-w-xl mx-auto",t.forEach(n=>{if(typeof n=="string"){if(n.trim()){const i=document.createElement("tr");i.className="budget-row",i.innerHTML=`
            <td class="px-6 py-4 text-left text-gray-900 font-medium">${this.escapeHtml(n)}</td>
            <td class="px-6 py-4 text-right"></td>
          `,s.appendChild(i)}}else if(Array.isArray(n)){const i=document.createElement("tbody");i.className="budget-group",n.forEach((r,a)=>{const[l,c,u]=r,p=document.createElement("tr");if(a===0&&(l==="+"||l==="-")){const f=document.createElement("tr");f.className="budget-group-header",f.innerHTML=`
                          <td colspan="2" class="px-6 py-5 font-bold">Cashflow</td>
                        `,i.appendChild(f)}if(a===0&&l==="="){p.className="budget-group-header";const f=this.getCleanLabel(r),w=this.getIconForLabel(f),m=f&&f.toLowerCase().includes("income"),b=m?"text-emerald-700":"text-gray-900",A=m?"bg-emerald-100 text-emerald-800":"bg-blue-100 text-blue-800";p.innerHTML=`
              <td class="px-6 py-5 text-left">
                <div class="flex items-center">
                  <div class="w-6 h-6 mr-3 ${m?"text-emerald-500":"text-blue-500"}">${this.createIconElement(w,24)}</div>
                  <span class="text-lg font-bold ${b}">${f||""}</span>
                </div>
              </td>
              <td class="px-6 py-5 text-right">
                <span class="inline-flex items-center px-4 py-2 rounded-xl ${A} text-lg font-mono font-bold">
                  ${this.formatNumber(c)}
                </span>
              </td>
            `}else if(p.className="budget-row",l==="+"?p.classList.add("flow-positive"):l==="-"&&p.classList.add("flow-negative"),l==="="&&(!u||u.trim()===""))p.classList.add("flow-result"),p.innerHTML=`
                <td class="px-6 py-4 text-left">
                  <div class="flex items-center">
                    <div class="w-2 h-2 bg-blue-500 rounded-full mr-3"></div>
                    <span class="text-base font-semibold text-blue-700">Total</span>
                  </div>
                </td>
                <td class="px-6 py-4 text-right">
                  <span class="inline-flex items-center px-3 py-1 rounded-lg bg-blue-100 text-blue-800 font-mono font-bold text-lg">
                    ${this.formatNumber(c)}
                  </span>
                </td>
              `;else{const f=this.getCleanLabel(r),w=this.getIconForLabel(f);let m=f||"";l==="+"?m=m||"Income":l==="-"&&(m=m||"Expense");let b="text-emerald-600 font-semibold font-mono";l==="-"?b="text-blue-600 font-semibold font-mono":l==="+"&&(b="text-emerald-600 font-bold font-mono"),p.innerHTML=`
                <td class="px-6 py-3 text-left text-gray-700 font-medium">
                  <div class="flex items-center">
                    <div class="w-4 h-4 mr-3 text-gray-500">${this.createIconElement(w,16)}</div>
                    <span>${m}</span>
                  </div>
                </td>
                <td class="px-6 py-3 text-right ${b}">${this.formatNumber(c)}</td>
              `}i.appendChild(p)}),s.appendChild(i)}}),e.appendChild(s)}getIconForLabel(t){if(!t)return"Circle";const e=t.toLowerCase();for(const[s,n]of this.iconMap)if(e.includes(s))return n;return e.includes("tax")||e.includes("council")||e.includes("rates")?"Home":e.includes("subscription")||e.includes("membership")||e.includes("premium")?"CreditCard":e.includes("health")||e.includes("medical")||e.includes("doctor")||e.includes("pharmacy")?"Heart":e.includes("gym")||e.includes("fitness")||e.includes("sport")?"Activity":e.includes("entertainment")||e.includes("cinema")||e.includes("movie")||e.includes("theatre")?"Film":e.includes("book")||e.includes("magazine")||e.includes("newspaper")||e.includes("education")?"BookOpen":e.includes("gift")||e.includes("present")||e.includes("birthday")?"Gift":e.includes("repair")||e.includes("maintenance")||e.includes("service")?"Wrench":"Circle"}createIconElement(t,e=24){const s=document.createElementNS("http://www.w3.org/2000/svg","svg");s.setAttribute("width",e.toString()),s.setAttribute("height",e.toString()),s.setAttribute("viewBox","0 0 24 24"),s.setAttribute("fill","none"),s.setAttribute("stroke","currentColor"),s.setAttribute("stroke-width","2"),s.setAttribute("stroke-linecap","round"),s.setAttribute("stroke-linejoin","round");const n=this.getIconPath(t);return n&&(s.innerHTML=n),s.outerHTML}getIconPath(t){const e={DollarSign:'<line x1="12" y1="1" x2="12" y2="23"></line><path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path>',Briefcase:'<rect x="2" y="7" width="20" height="14" rx="2" ry="2"></rect><path d="M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"></path>',Home:'<path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path><polyline points="9,22 9,12 15,12 15,22"></polyline>',Users:'<path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"></path><circle cx="9" cy="7" r="4"></circle><path d="M22 21v-2a4 4 0 0 0-3-3.87"></path><path d="M16 3.13a4 4 0 0 1 0 7.75"></path>',ShoppingCart:'<circle cx="9" cy="21" r="1"></circle><circle cx="20" cy="21" r="1"></circle><path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path>',Utensils:'<path d="M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2"></path><path d="M7 2v20"></path><path d="M21 15V2v0a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3z"></path>',Car:'<path d="M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9L18 10V6l-2-4H8L6 6v4l-2.5 1.1c-.8.2-1.5 1-1.5 1.9v3c0 .6.4 1 1 1h2"></path><circle cx="7" cy="17" r="2"></circle><path d="M9 17h6"></path><circle cx="17" cy="17" r="2"></circle>',Phone:'<path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"></path>',Wifi:'<path d="M1.42 9a16 16 0 0 1 21.16 0"></path><path d="M5 12.55a11 11 0 0 1 14.08 0"></path><path d="M8.53 16.11a6 6 0 0 1 6.95 0"></path><line x1="12" y1="20" x2="12.01" y2="20"></line>',Zap:'<polygon points="13,2 3,14 12,14 11,22 21,10 12,10 13,2"></polygon>',Droplets:'<path d="M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z"></path><path d="M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2.04 4.6 4.14 6.09A5.11 5.11 0 0 1 20 14c0 .75-.22 1.46-.61 2.06"></path>',Shield:'<path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"></path>',Heart:'<path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path>',PawPrint:'<circle cx="11" cy="4" r="2"></circle><circle cx="18" cy="8" r="2"></circle><circle cx="20" cy="16" r="2"></circle><path d="M9 10a5 5 0 0 1 5 5v3.5a3.5 3.5 0 0 1-6.84 1.045Q6.52 17.48 4.46 16.84A3.5 3.5 0 0 1 5.5 10Z"></path>',Scissors:'<circle cx="6" cy="6" r="3"></circle><circle cx="6" cy="18" r="3"></circle><line x1="20" y1="4" x2="8.12" y2="15.88"></line><line x1="14.47" y1="14.48" x2="20" y2="20"></line><line x1="8.12" y1="8.12" x2="12" y2="12"></line>',Coffee:'<path d="M18 8h1a4 4 0 0 1 0 8h-1"></path><path d="M2 8h16v9a4 4 0 0 1-4 4H6a4 4 0 0 1-4-4V8z"></path><line x1="6" y1="1" x2="6" y2="4"></line><line x1="10" y1="1" x2="10" y2="4"></line><line x1="14" y1="1" x2="14" y2="4"></line>',Calculator:'<rect x="4" y="2" width="16" height="20" rx="2"></rect><line x1="8" y1="6" x2="16" y2="6"></line><line x1="8" y1="10" x2="16" y2="10"></line><line x1="8" y1="14" x2="16" y2="14"></line><line x1="8" y1="18" x2="16" y2="18"></line>',Trash2:'<polyline points="3,6 5,6 21,6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path><line x1="10" y1="11" x2="10" y2="17"></line><line x1="14" y1="11" x2="14" y2="17"></line>',Package:'<line x1="16.5" y1="9.4" x2="7.5" y2="4.21"></line><path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"></path><polyline points="3.27,6.96 12,12.01 20.73,6.96"></polyline><line x1="12" y1="22.08" x2="12" y2="12"></line>',CircleDollarSign:'<circle cx="12" cy="12" r="10"></circle><line x1="12" y1="6" x2="12" y2="18"></line><path d="M16 10a4 4 0 0 0-8 0c0 1 0 2 1 3h6c1-1 1-2 1-3z"></path><path d="M8 14a4 4 0 0 0 8 0"></path>',Tv:'<rect x="2" y="3" width="20" height="14" rx="2" ry="2"></rect><line x1="8" y1="21" x2="16" y2="21"></line><line x1="12" y1="17" x2="12" y2="21"></line>',Circle:'<circle cx="12" cy="12" r="10"></circle>',CreditCard:'<rect x="1" y="4" width="22" height="16" rx="2" ry="2"></rect><line x1="1" y1="10" x2="23" y2="10"></line>',Activity:'<polyline points="22,12 18,12 15,21 9,3 6,12 2,12"></polyline>',Film:'<rect x="2" y="3" width="20" height="14" rx="2" ry="2"></rect><line x1="8" y1="21" x2="16" y2="21"></line><line x1="12" y1="17" x2="12" y2="21"></line><circle cx="12" cy="10" r="3"></circle>',BookOpen:'<path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"></path><path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"></path>',Gift:'<polyline points="20,12 20,22 4,22 4,12"></polyline><rect x="2" y="7" width="20" height="5"></rect><line x1="12" y1="22" x2="12" y2="7"></line><path d="M12 7H7.5a2.5 2.5 0 0 1 0-5C11 2 12 7 12 7z"></path><path d="M12 7h4.5a2.5 2.5 0 0 0 0-5C13 2 12 7 12 7z"></path>',Wrench:'<path d="M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"></path>',Music:'<path d="M9 18V5l12-2v13"></path><circle cx="6" cy="18" r="3"></circle><circle cx="18" cy="16" r="3"></circle>',Beer:'<path d="M17 11h1a3 3 0 0 1 0 6h-1M5 9v10a4 4 0 0 0 4 4h2a4 4 0 0 0 4-4V9M5 9l1-6h12l1 6M5 9h12"></path>',Wine:'<path d="M12 8V1l4 4H8l4-4v7M8 8l2 14h4l2-14M5 8h14"></path>'};return e[t]||e.Circle}getCleanLabel(t){var s,n;return this.currentBudget&&((s=this.currentBudget.modifiers)==null?void 0:s.get(t))?((n=this.currentBudget.ids)==null?void 0:n.get(t))||t[2]||"":t[2]||""}formatNumber(t){return t==null?"":Number.isInteger(t)?new Intl.NumberFormat("en-GB",{minimumFractionDigits:0,maximumFractionDigits:0}).format(t):new Intl.NumberFormat("en-GB",{minimumFractionDigits:0,maximumFractionDigits:2}).format(t)}escapeHtml(t){const e=document.createElement("div");return e.textContent=t,e.innerHTML}renderStats(){if(!this.currentBudget||!this.currentBudget.stats)return;const t=this.currentBudget.stats,e=this.elements.statsOutput;e.innerHTML="";const s=document.createElement("div");if(s.className="mb-8",s.innerHTML='<h3 class="text-lg font-bold text-gray-900 mb-4">Financial Projections</h3>',[["Monthly Savings",t.projections.savings],["6 Months",t.projections.sixmonths],["1 Year",t.projections.oneyear],["3 Years",t.projections.threeyears],["5 Years",t.projections.fiveyears],["10 Years",t.projections.tenyears]].forEach(([i,r])=>{const a=document.createElement("div");a.className="projection-item",a.innerHTML=`
        <span class="text-sm font-medium text-gray-600">${i}</span>
        <span class="inline-flex items-center px-3 py-1 rounded-lg bg-emerald-100 text-emerald-800 text-sm font-mono font-bold">
          ${this.formatCurrency(r)}
        </span>
      `,s.appendChild(a)}),e.appendChild(s),t.distribution&&t.distribution.length>0){const i=document.createElement("div");i.className="space-y-4",i.innerHTML='<h3 class="text-lg font-bold text-gray-900 mb-4">Expense Breakdown</h3>',t.distribution.slice(0,8).forEach(([r,a])=>{const l=document.createElement("div");l.className="space-y-2",l.innerHTML=`
          <div class="flex justify-between items-center">
            <span class="text-sm font-medium text-gray-700">${r}</span>
            <span class="text-sm font-mono font-semibold text-blue-600">${(a*100).toFixed(1)}%</span>
          </div>
          <div class="distribution-bar w-full">
            <div class="distribution-fill" style="width: ${a*100}%"></div>
          </div>
        `,i.appendChild(l)}),e.appendChild(i)}}formatCurrency(t){return new Intl.NumberFormat("en-GB",{style:"currency",currency:"GBP",minimumFractionDigits:0,maximumFractionDigits:2}).format(t)}showError(t){const e=this.elements.budgetOutput;e.innerHTML=`
      <div class="p-6 text-center">
        <div class="bg-red-50 border border-red-200 rounded-xl p-6">
          <div class="flex items-center justify-center mb-4">
            <div class="flex-shrink-0">
              <svg class="h-8 w-8 text-red-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z" />
              </svg>
            </div>
            <div class="ml-3">
              <h3 class="text-lg font-medium text-red-800">Error Loading Budget</h3>
            </div>
          </div>
          <p class="text-red-700">${t}</p>
        </div>
      </div>
    `}}new D;
